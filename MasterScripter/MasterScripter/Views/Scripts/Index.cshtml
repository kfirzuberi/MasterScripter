@model IEnumerable<MasterScripter.DAL.Models.Script>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>


<div class="row">
    <div class="col-md-4">
        <ul class="list-group">
            @foreach (var item in Model)
            {
                <li id="@( item.Id + "_" + item.Version )" class="list-group-item d-flex justify-content-between align-items-center list-group-item-action">
                    @Html.DisplayFor(modelItem => item.Name)
                    <span class="badge badge-primary badge-pill">
                        @Html.DisplayFor(modelItem => item.Version)
                    </span>
                </li>
            }
        </ul>
    </div>
    <div class="col-md-8">
        <div id="scriptDetail">
            
        </div>
    </div>
    
    <script type="text/javascript">

        setTimeout(function() {

                var url = '@Url.Action("GetScriptDetail", "Scripts")';

                $('.list-group-item').click(function (event) {
             
                    var params = event.target.id.split('_'); // convert from id_version to [id, version]
                      $('#scriptDetail').load(url, { id: params[0], version: params[1] });
                });
            },
            1500);
    
      
    </script>
</div>







<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.FileType.Language)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.User.FullName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Content)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Description)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CreationDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Cost)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.FileType.Language)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.User.FullName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Content)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.CreationDate)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Cost)
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new {  id=item.Id, version = item.Version  }) |
            @Html.ActionLink("Details", "Details", new { id = item.Id, version = item.Version }) |
            @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey */ })
        </td>
    </tr>
}

</table>
