@model IEnumerable<MasterScripter.DAL.Models.User>

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

<div class="container-fluid">
    <div class="row">
        <div class="card-columns" style="column-count: 3">
            @foreach (var item in Model)
            {
                <div class="card text-center" us-id="@item.Id">
                    <h5 class="card-header">
                        <!-- TODO: change image according item role -->
                        <img class="img-fluid img-thumbnail rounded-circle" 
                             data-toggle="tooltip" data-placement="top" title="@item.Role" src="@item.Company.Logo" style="height: 3.5rem; width: 3.5rem;" />
                    </h5>

                    <div class="card-body">
                        <h5 class="card-title">
                            <strong style="font-size: 1rem; font-weight: bold;">@item.FullName</strong>
                            <br />
                            <small style="font-size: 0.8rem; font-weight: bold;">@item.Company.Name</small>
                            <i data-toggle="tooltip" data-placement="top" title="@(item.IsDeleted ? "This user is disabled" : "This user is active")"
                               class="material-icons @(item.IsDeleted ?"text-danger":"text-success")" style="position: absolute; top: 0; left: 1rem;">@(item.IsDeleted ? "person_outline" : "person")</i>

                        </h5>
                        <p class="card-text">
                            <small class="text-muted"> @item.Email </small>
                        </p>
                        <a href="@Url.Action("Edit","Users", new { id = item.Id })" class="card-link">Edit</a>
                        <a href="@Url.Action("Details", "Users", new { id = item.Id })" class="card-link">Show related data</a>
                    </div>
                </div>
            }
        </div>
    </div>
</div>


<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Company.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FullName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Email)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Role)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.IsDeleted)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.CreationDate)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Company.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FullName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Role)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.IsDeleted)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreationDate)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
            </td>
        </tr>
    }

</table>
